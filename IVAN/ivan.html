<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS3 Shop</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/IVAN/css/ivan.css">
    <link rel="stylesheet" href="/IVAN/css/fichaProducto.css">
</head>

<body>
    <header>
        <h1>JS3 Shop</h1>

        <!-- MenÃº hamburguesa -->
        <button id="hamburger" class="hamburger-menu" aria-label="MenÃº">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <!-- Carrito de compras -->
        <div class="cart-container">
            <span class="cart-icon" id="cart-icon">ðŸ›’</span>
            <span class="cart-count" id="cart-count">0</span>
            <div class="cart-dropdown" id="cart-dropdown">
                <h3>Carrito</h3>
                <div id="cart-items"></div>
                <p>Total: â‚¬<span id="cart-total">0.00</span></p>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- MenÃº lateral -->
        <nav id="nav">
            <h2>CategorÃ­as</h2>
            <ul>
                <li>
                    <a href="#">MÃ³viles</a>
                    <ul class="subcategoria">
                        <li><a href="#">iPhone</a></li>
                        <li><a href="#">Samsung</a></li>
                        <li><a href="#">Xiaomi</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Ordenadores</a>
                    <ul class="subcategoria">
                        <li><a href="#">PortÃ¡tiles</a></li>
                        <li><a href="#">PC de Mesa</a></li>
                        <li><a href="#">PC Gaming</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#">Videojuegos</a>
                    <ul class="subcategoria">
                        <li><a href="#">Xbox</a></li>
                        <li><a href="#">Playstation</a></li>
                        <li><a href="#">Nintendo</a></li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- Productos -->
        <div class="productos-container">
            <main class="productos" id="productosJSON"></main>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // MenÃº hamburguesa
        document.getElementById('hamburger').addEventListener('click', function () {
            document.getElementById('nav').classList.toggle('active');
        });

        // Carrito de compras
        let carrito = [];
        const cartDropdown = document.getElementById('cart-dropdown');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartCount = document.getElementById('cart-count');
        const cartTotal = document.getElementById('cart-total');

        // Mostrar/Ocultar carrito
        document.getElementById('cart-icon').addEventListener('click', () => {
            cartDropdown.classList.toggle('active');
        });

        // FunciÃ³n para actualizar el carrito
        function actualizarCarrito() {
            cartItemsContainer.innerHTML = '';
            let total = 0;

            carrito.forEach(item => {
                total += item.precio * item.cantidad;

                const itemElement = document.createElement('div');
                itemElement.classList.add('cart-item');
                itemElement.innerHTML = `${item.nombre} (x${item.cantidad}) - â‚¬${(item.precio * item.cantidad).toFixed(2)}`;
                cartItemsContainer.appendChild(itemElement);
            });

            cartCount.textContent = carrito.reduce((acc, item) => acc + item.cantidad, 0);
            cartTotal.textContent = total.toFixed(2);
        }

        // FunciÃ³n para agregar productos al carrito
        function agregarAlCarrito(producto) {
            const productoExistente = carrito.find(item => item.id === producto.id);

            if (productoExistente) {
                productoExistente.cantidad += producto.cantidad;
            } else {
                carrito.push(producto);
            }

            actualizarCarrito();
        }

        // Capturar el evento del botÃ³n "AÃ±adir al carrito"
        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('btn-comprar')) {
                const card = e.target.closest('.product-card');
                const id = e.target.dataset.id;
                const nombre = card.querySelector('h2').textContent;
                const precio = parseFloat(card.querySelector('.price strong').textContent.replace('â‚¬', ''));
                const cantidad = parseInt(card.querySelector('.cantidad-input').value);

                const producto = { id, nombre, precio, cantidad };
                agregarAlCarrito(producto);
            }
        });
    </script>

    <!-- Cargar productos -->
    <script type="module" src="/Pedro/js/PedroEscaparate.js"></script>
</body>

</html>


